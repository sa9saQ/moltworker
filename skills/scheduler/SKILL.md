---
name: scheduler
description: Manage scheduled tasks, recurring jobs, and automated workflows. Handles daily routines, weekly reports, and event-triggered actions.
---

# スケジューラースキル

定期タスク、繰り返しジョブ、自動化ワークフローを管理するスキル。

## 概要

### なぜ必要か
```
目的:
├── 毎日の投稿を自動化
├── 週次レポートを自動生成
├── 定期的な監視・チェック
├── イベントベースの自動対応
└── 人間の介入なしで継続稼働
```

---

## 日次スケジュール（JST）

### 朝のルーティン（7:00）
```
1. 各プラットフォームの新着確認
   ├── ココナラ: 新規問い合わせ
   ├── Fiverr: 新規メッセージ
   └── Moltbook: 新規依頼

2. 優先度の高いタスク特定
   ├── 納期が今日のもの
   └── 未返信のメッセージ

3. 今日のツイート準備
   └── thought-loggerから候補選出
```

### 昼のチェック（12:00）
```
1. 進行中タスクの状況確認
2. 新着メッセージへの返信
3. SNS投稿（Threads向け）
4. トレンドチェック
```

### 夕方の投稿（19:00）
```
1. X投稿（ゴールデンタイム）
2. 今日の進捗まとめ
3. 明日の準備
```

### 夜の集計（23:00）
```
1. 今日の収益集計
2. thought-logger: 今日の振り返り
3. 明日のツイート候補生成
4. 日次レポート保存
```

---

## 週次スケジュール

| 曜日 | 時間 | タスク |
|------|------|--------|
| 月曜 | 09:00 | 先週のレビュー、今週の目標設定 |
| 金曜 | 18:00 | 週次収益レポート生成 |
| 日曜 | 14:00 | ポッドキャスト収録準備 |
| 日曜 | 20:00 | 来週のコンテンツ計画 |

---

## 月次スケジュール

| 日 | タスク |
|----|--------|
| 1日 | 先月の収益レポート、今月の目標設定 |
| 最終日 | 月次収益締め、来月の計画 |

---

## Cloudflare Workers Cron設定

### wrangler.toml
```toml
[triggers]
crons = [
  "0 22 * * *",   # 07:00 JST (UTC+9)
  "0 3 * * *",    # 12:00 JST
  "0 10 * * *",   # 19:00 JST
  "0 14 * * *",   # 23:00 JST
  "0 * * * *"     # 毎時（メッセージチェック）
]
```

---

## タスク定義

### プリセットタスク
```
デフォルトタスク:
├── daily_morning_check: 毎日7:00 - 新着確認
├── daily_noon_check: 毎日12:00 - 進捗確認
├── daily_evening_post: 毎日19:00 - SNS投稿
├── daily_night_summary: 毎日23:00 - 日次集計
├── weekly_revenue_report: 毎週金曜18:00
├── weekly_podcast_prep: 毎週日曜14:00
├── monthly_review: 毎月1日9:00
└── hourly_message_check: 毎時0分
```

---

## 実行ログ

### 失敗時の対応
```
リトライ戦略:
├── 1回目失敗: 5分後にリトライ
├── 2回目失敗: 15分後にリトライ
├── 3回目失敗: エラーログ記録、人間に通知
└── 致命的エラー: 即座に人間に通知
```

---

## セキュリティ

### 実行制限
```
自動実行禁止:
├── 送金操作
├── アカウント設定変更
├── 大量投稿
├── APIキー操作
└── 人格に関わる変更
```
